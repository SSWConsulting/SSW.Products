---
seo:
  title: SSW EagleEye - Secret Management for App Registrations
  description: >-
    Rotate expired or expiring client secrets for EagleEye Engine and Portal app
    registrations, then update matching Key Vault secret values.
title: Manage Secrets for App Registrations
date: '2026-02-25T00:00:00.000Z'
---

Use this guide when a client secret for the `Engine` or `Portal` app registration is expiring (or has expired), and you need to rotate it safely.

This guide is intended for SysAdmins or anyone with basic Azure knowledge.

Secret rotation is currently a manual Azure process. In future EagleEye releases, secret management will be available directly in the EagleEye Portal.

## Required roles and permissions

> **Tip:** You do not need to hold all roles yourself. If needed, ask your SysAdmin or IT admin to perform these steps or grant the required access.

For app registration secret creation or deletion, you typically need one of:

* App registration **[Owner](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/delegate-app-roles#assign-application-owners)**
* **[Application Administrator](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/permissions-reference#application-administrator)**

For Key Vault secret value updates:

* **[Key Vault Secrets Officer](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/security#key-vault-secrets-officer)** (recommended least privilege, if using [Azure RBAC](https://learn.microsoft.com/en-us/azure/role-based-access-control/overview))
* **[Key Vault Administrator](https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/security#key-vault-administrator)** (broader access)
* **[Assign a Key Vault access policy (legacy)](https://learn.microsoft.com/en-us/azure/key-vault/general/assign-access-policy?tabs=azure-portal):**
  * The older permission model allowing you to assign explicit, granular permissions (like `Get`, `List`, `Set`, `Delete`) directly to a [security principal](https://learn.microsoft.com/en-us/windows-server/identity/ad-ds/manage/understand-security-principals).
  * Microsoft currently recommends migrating from this to Azure RBAC when possible.

## Before you rotate

1. Confirm which app secret you are rotating (`Engine` or `Portal`).
2. In Azure Portal, go to **App registrations** -> **All applications** and search `SSW.EagleEye`.
3. Identify the target app (no secret management required for Api app):
   * `SSW.EagleEye.Engine`
   * `SSW.EagleEye.Portal
     `![](/EagleEye/Guides/3-App-Registrations.png)
4. The Key Vault secret name will be:
   * `SSW.EagleEye.Engine` -> `AppRegistration-ClientSecret`
   * `SSW.EagleEye.Portal` -> `AppRegistration-ClientSecret-Portal`

For background on these app registrations and the Master app flow, see [App Registrations & Permissions](./app-registrations-reference) reference.

## Step 1. Rotate secret for App Registration (Azure Portal)

Repeat these steps for the app you are rotating (`Engine` or `Portal`):

1. Go to **Azure Portal** -> **App registrations** -> **All applications**.
2. Open the target app (for example, `SSW.EagleEye.Engine`).
3. Go to **Manage -> Certificates & secrets**.
4. Under **Client secrets**, do one of the following:
   * **Recommended:** create the new secret first, verify, then delete the old one.
5. Click **New client secret**, set a clear description (for example, `EngineSecret-Updated-YYYY-MM-DD`), choose expiry, then click **Add**.
   ![](/EagleEye/Guides/Update-Engine-Secret.png)
6. **Copy the secret value immediately** (it is shown only once).
   ![](/EagleEye/Guides/Copy-Engine-Secret.png)

> Tip: You can keep the new secret in a temporary notes only until Key Vault is updated, then remove it.

## Step 2. Update the secret value in your EagleEye Key Vault

1. In your **Azure Portal →** **Resource groups** **→** Select **EagleEye resource group** which you created during installation.
2. Open the EagleEye managed application project.
   ![](/EagleEye/Guides/EagleEye-RG.png)
3. Open the **Managed resource group** (named `mrg-ssweagleeye-xxx`).
   ![](/EagleEye/Guides/EagleEye-MRG.png)
4. Search for `kv-shared` in your **Managed Resource Group** & click on the Key Vault (named `kv-shared-xxx`).
   ![](/EagleEye/Guides/KV-Shared.png)
5. Go to **Secrets** and open the matching secret name:
   * `AppRegistration-ClientSecret` for `Engine`
   * `AppRegistration-ClientSecret-Portal` for `Portal`
     ![](/EagleEye/Guides/KV-Secrets.png)
6. Create a new secret version with the copied client secret value.

   ![](/EagleEye/Guides/KV-Secret-New.png)![](/EagleEye/Guides/KV-Secret-New-Paste.png)
7. Right click on previous secret version & disable it
8. Confirm only new version is enabled
   ![](/EagleEye/Guides/KV-Secrets-Enabled-Disabled.png)

## Step 3. Restart the App (only for Portal)

* If you rotated the **Portal** app secret, we need to restart the Portal container app (`ca-nextjs-xxx`) so it picks up the new value.

To restart:

1. Find your portal container app in your managed resource group (same way you found the Key Vault `kv-shared-xxx` in step 2 above)
2. Open the Portal container app (`ca-nextjs-xxx`).
   ![](/EagleEye/Guides/CA-Nextjs-xxx.png)
3. Select **Stop**, then **Start**.![](/EagleEye/Guides/CA-Stop.png)

## Verify

* Confirm the new app secret exists and is not expired.
* Confirm Key Vault shows the new latest secret version.
* Confirm the old Key Vault secret version is disabled.
* For Portal: You can ;ogout & confirm you can log back in
* For Engine: Run a manual scan & confirm engine is working
* After validation, remove the old app registration client secret if still present.

## Using Azure CLI (optional)

> Use CLI only if you are comfortable handling secrets in terminal history.Recommended: run these commands in Azure Cloud Shell.

### 1) Get App ID by display name

```bash
APP_NAME="SSW.EagleEye.Engine"
APP_ID=$(az ad app list --display-name "$APP_NAME" --query "[0].appId" -o tsv)
```

Repeat for `SSW.EagleEye.Portal`.

### 2) Add a new client secret (append, do not replace existing)

You can set duration using `--years` or `--end-date`.

```bash
NEW_SECRET=$(az ad app credential reset \
  --id "$APP_ID" \
  --append \
  --display-name "${APP_NAME}-$(date +%Y-%m-%d)" \
  --years 1 \
  --query password -o tsv)
```

### 3) Find the EagleEye Key Vault and update the secret value

```bash
KV_NAME="<eagleeye-keyvault-name>"
KV_SECRET_NAME="<AppRegistration-ClientSecret|AppRegistration-ClientSecret-Portal>"

az keyvault secret set \
  --vault-name "$KV_NAME" \
  --name "$KV_SECRET_NAME" \
  --value "$NEW_SECRET"
```

### 4) Optional: disable old Key Vault secret version

```bash
az keyvault secret list-versions --vault-name "$KV_NAME" --name "$KV_SECRET_NAME"
az keyvault secret set-attributes --vault-name "$KV_NAME" --name "$KV_SECRET_NAME" --version "<old-version-id>" --enabled false
```

### 5) Optional: delete old app credential after verification

```bash
az ad app credential list --id "$APP_ID"
az ad app credential delete --id "$APP_ID" --key-id "<old-key-id-guid>"
```

### 6) Optional: restart Portal container app (if Portal secret changed)

```bash
RG_NAME="<managed-resource-group-name>"
PORTAL_CA_NAME="<ca-nextjs-name>"

az containerapp revision restart \
  --resource-group "$RG_NAME" \
  --name "$PORTAL_CA_NAME"
```

## Notes

* Rotate secrets before they expire where possible.
* Do not delete and recreate app registrations for standard secret rotation.
